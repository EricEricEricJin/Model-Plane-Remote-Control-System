# main logic and AP and so on